name: Comment Bot

on:
  issues:
    types: [opened, closed]
  pull_request:
    types: [opened, closed]

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
      - name: Authenticate GitHub CLI
        run: gh auth login --with-token < <(echo "${{ secrets.GITHUB_TOKEN }}")
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # ðŸ†• Issue opened
      - name: Comment on issue opened
        if: github.event_name == 'issues' && github.event.action == 'opened'
        run: |
          gh issue comment ${{ github.event.issue.number }} \
            --body "ðŸ‘‹ Thanks for opening this issue, @${{ github.event.issue.user.login }}! We'll take a look soon."
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # ðŸ›‘ Issue closed as "not planned"
      - name: Comment on issue closed as not planned
        if: github.event_name == 'issues' && github.event.action == 'closed' && github.event.issue.state_reason == 'not_planned'
        run: |
          gh issue comment ${{ github.event.issue.number }} \
            --body "âš ï¸ This issue was closed as 'not planned'. If you believe it still needs attention, feel free to reopen or clarify further."
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # ðŸ“ Issue closed normally
      - name: Comment on issue closed normally
        if: github.event_name == 'issues' && github.event.action == 'closed' && github.event.issue.state_reason != 'not_planned'
        run: |
          gh issue comment ${{ github.event.issue.number }} \
            --body "âœ… This issue has been closed. Thanks for contributing, @${{ github.event.issue.user.login }}!"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # ðŸš€ PR opened
      - name: Comment on PR opened
        if: github.event_name == 'pull_request' && github.event.action == 'opened'
        run: |
          gh pr comment ${{ github.event.pull_request.number }} \
            --body "ðŸš€ Thanks for the PR, @${{ github.event.pull_request.user.login }}! @ReaveND will review it shortly!"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # âŒ PR closed without merging
      - name: Comment on PR closed without merge
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && !github.event.pull_request.merged
        run: |
          gh pr comment ${{ github.event.pull_request.number }} \
            --body "âŒ This PR was closed without merging. If youâ€™d like to revisit it, feel free to reopen or submit a new one."
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # ðŸ“¦ PR closed after merging
      - name: Comment on PR merged
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged
        run: |
          gh pr comment ${{ github.event.pull_request.number }} \
            --body "ðŸŽ‰ PR merged by @ReaveND! Great work, @${{ github.event.pull_request.user.login }}. Thanks for contributing!"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
